
{if uploads}

<script type="text/javascript">

// ---------------------------
//  Choose File, Update Filename
// ---------------------------

function update_destination(obj)
{
	if (document.getElementById('new_filename'))
	{
		var name   = obj.value;
		var path_x = name.lastIndexOf('\/');
		var path_y = name.lastIndexOf('\\');

		if (path_x != -1)
		{
			name = name.substring(path_x+1);
		}
		else if (path_y != -1)
		{
			name = name.substring(path_y+1);
		}

		document.getElementById('new_filename').value = name.replace(/ /g, '_');
	}
}
</script>


{if can_edit}
{form_declaration:wiki:uploads}

<div class="codeblock"><input type="file" name="userfile" size="20" onchange='update_destination(this)' /></div>

{if file_types == 'images'}
<div class="codeblock"><div class="defaultBold">{lang:image_uploads_only}</div></div>
{if:else}
<div class="codeblock"><div class="defaultBold">{lang:allowed_file_types}:</div> {file_types}</div>
{/if}

<div class="codeblock">
<span class="defaultBold">{lang:new_filename}: </span>
&nbsp;&nbsp;<input class="input" name="new_filename" id="new_filename" type="text" size="50" maxlength="80" />
</div>

<div class="codeblock">
<div class="defaultBold">{lang:summary}: </div>
<textarea style='width:98%;' name='summary' id='summary' cols='90' rows='10' class='textarea'></textarea>
</div>

<input name="submit" class="submit" type="submit" value="{lang:submit}" />
</form>
{/if}

{if cannot_edit}
<p><strong>{lang:no_image_uploads}</strong></p>
{/if}

{if:else}

<p><strong>{lang:no_uploads}</strong></p>

{/if}


